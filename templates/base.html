<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Krąg Mocy - {{ title }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=2">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  {% include 'navbar.html' %}

  {% block content %}{% endblock %}

  {% include 'footer.html' %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Efekt parallax - obrazek zakrywany podczas przewijania
    window.addEventListener('scroll', function() {
      const heroImage = document.querySelector('.hero-image img');
      const scrolled = window.pageYOffset;

      if (heroImage) {
        // Obrazek porusza się wolniej niż scroll
        heroImage.style.transform = 'translateY(' + (scrolled * 0.5) + 'px)';

        // Opcjonalnie: fade out obrazka
        const opacity = Math.max(0, 1 - (scrolled / 400));
        heroImage.style.opacity = opacity;
      }
    });
  </script>
   <script>
    // ===== LICZNIK ODLICZAJĄCY =====
    // Data wydarzenia pobierana z backendu
    {% if event_date %}
    const eventDate = new Date('{{ event_date }}').getTime();
    {% else %}
    const eventDate = new Date('2025-11-15T18:00:00').getTime();
    {% endif %}

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = eventDate - now;

      if (distance < 0) {
        // Wydarzenie już się odbyło
        document.getElementById('days').textContent = '00';
        document.getElementById('hours').textContent = '00';
        document.getElementById('minutes').textContent = '00';
        document.getElementById('seconds').textContent = '00';
        return;
      }

      // Obliczenia
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      // Wyświetlanie z zerami wiodącymi
      document.getElementById('days').textContent = String(days).padStart(2, '0');
      document.getElementById('hours').textContent = String(hours).padStart(2, '0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
    }

    // Wyświetl datę wydarzenia
    const eventDateObj = new Date(eventDate);
    const options = {
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    };
    const dateDisplay = document.getElementById('event-date-display');
    if (dateDisplay) {
      dateDisplay.textContent = eventDateObj.toLocaleDateString('pl-PL', options);
    }

    // Aktualizuj co sekundę
    if (document.getElementById('days')) {
      updateCountdown();
      setInterval(updateCountdown, 1000);
    }
  </script>
</body>
</html>